"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.response = exports.request = void 0;
const utils_1 = require("@aws-appsync/utils");
const helpers_1 = require("../lib/helpers");
function request(ctx) {
    // add timestamps
    const item = (0, helpers_1.createItem)(ctx.args.input);
    const id = utils_1.util.autoId();
    // const key = {
    //   id: item.employeeId,
    //   sk: "ITEM#" + id,
    // };
    // const itemParams = {
    //   publishDate: util.time.nowISO8601(),
    //   ...item,
    //   GSI1PK: "INVENTORY#" + item.inventoryId,
    //   GSI1SK: "ITEM#" + id,
    //   GSI2PK: "ITEM",
    // };
    // return ddb.put(
    //   key,
    //   itemParams
    // )
    return {
        operation: "PutItem",
        key: {
            id: utils_1.util.dynamodb.toDynamoDB(item.employeeId),
            sk: "ITEM#" + id,
        },
        attributeValues: utils_1.util.dynamodb.toMapValues({
            publishDate: utils_1.util.time.nowISO8601(),
            ...item,
            GSI1PK: "INVENTORY#" + item.inventoryId,
            GSI1SK: "ITEM#" + id,
            GSI2PK: "ITEM",
        }),
    };
}
exports.request = request;
function response(ctx) {
    return ctx.result;
}
exports.response = response;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlSXRlbS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNyZWF0ZUl0ZW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsOENBQTJFO0FBQzNFLDRDQUE0QztBQUc1QyxTQUFnQixPQUFPLENBQ3JCLEdBQW9DO0lBRXBDLGlCQUFpQjtJQUNqQixNQUFNLElBQUksR0FBRyxJQUFBLG9CQUFVLEVBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUV4QyxNQUFNLEVBQUUsR0FBRyxZQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFFekIsZ0JBQWdCO0lBQ2hCLHlCQUF5QjtJQUN6QixzQkFBc0I7SUFDdEIsS0FBSztJQUNMLHVCQUF1QjtJQUN2Qix5Q0FBeUM7SUFDekMsYUFBYTtJQUNiLDZDQUE2QztJQUM3QywwQkFBMEI7SUFDMUIsb0JBQW9CO0lBQ3BCLEtBQUs7SUFFTCxrQkFBa0I7SUFDbEIsU0FBUztJQUNULGVBQWU7SUFDZixJQUFJO0lBRUosT0FBTztRQUNMLFNBQVMsRUFBRSxTQUFTO1FBQ3BCLEdBQUcsRUFBRTtZQUNILEVBQUUsRUFBRSxZQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQzdDLEVBQUUsRUFBRSxPQUFPLEdBQUcsRUFBRTtTQUNqQjtRQUNELGVBQWUsRUFBRSxZQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQztZQUN6QyxXQUFXLEVBQUUsWUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkMsR0FBRyxJQUFJO1lBQ1AsTUFBTSxFQUFFLFlBQVksR0FBRyxJQUFJLENBQUMsV0FBVztZQUN2QyxNQUFNLEVBQUUsT0FBTyxHQUFHLEVBQUU7WUFDcEIsTUFBTSxFQUFFLE1BQU07U0FDZixDQUFDO0tBQ0gsQ0FBQztBQUNKLENBQUM7QUF2Q0QsMEJBdUNDO0FBRUQsU0FBZ0IsUUFBUSxDQUFDLEdBQWtCO0lBQ3pDLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNwQixDQUFDO0FBRkQsNEJBRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb250ZXh0LCBEeW5hbW9EQlB1dEl0ZW1SZXF1ZXN0LCB1dGlsIH0gZnJvbSBcIkBhd3MtYXBwc3luYy91dGlsc1wiO1xuaW1wb3J0IHsgY3JlYXRlSXRlbSB9IGZyb20gXCIuLi9saWIvaGVscGVyc1wiO1xuaW1wb3J0IHsgTXV0YXRpb25DcmVhdGVJdGVtQXJncywgSXRlbSB9IGZyb20gXCIuLi90eXBlcy9hcHBzeW5jXCI7XG5pbXBvcnQgKiBhcyBkZGIgZnJvbSBcIkBhd3MtYXBwc3luYy91dGlscy9keW5hbW9kYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIHJlcXVlc3QoXG4gIGN0eDogQ29udGV4dDxNdXRhdGlvbkNyZWF0ZUl0ZW1BcmdzPlxuKTogRHluYW1vREJQdXRJdGVtUmVxdWVzdCB7XG4gIC8vIGFkZCB0aW1lc3RhbXBzXG4gIGNvbnN0IGl0ZW0gPSBjcmVhdGVJdGVtKGN0eC5hcmdzLmlucHV0KTtcblxuICBjb25zdCBpZCA9IHV0aWwuYXV0b0lkKCk7XG5cbiAgLy8gY29uc3Qga2V5ID0ge1xuICAvLyAgIGlkOiBpdGVtLmVtcGxveWVlSWQsXG4gIC8vICAgc2s6IFwiSVRFTSNcIiArIGlkLFxuICAvLyB9O1xuICAvLyBjb25zdCBpdGVtUGFyYW1zID0ge1xuICAvLyAgIHB1Ymxpc2hEYXRlOiB1dGlsLnRpbWUubm93SVNPODYwMSgpLFxuICAvLyAgIC4uLml0ZW0sXG4gIC8vICAgR1NJMVBLOiBcIklOVkVOVE9SWSNcIiArIGl0ZW0uaW52ZW50b3J5SWQsXG4gIC8vICAgR1NJMVNLOiBcIklURU0jXCIgKyBpZCxcbiAgLy8gICBHU0kyUEs6IFwiSVRFTVwiLFxuICAvLyB9O1xuXG4gIC8vIHJldHVybiBkZGIucHV0KFxuICAvLyAgIGtleSxcbiAgLy8gICBpdGVtUGFyYW1zXG4gIC8vIClcblxuICByZXR1cm4ge1xuICAgIG9wZXJhdGlvbjogXCJQdXRJdGVtXCIsXG4gICAga2V5OiB7XG4gICAgICBpZDogdXRpbC5keW5hbW9kYi50b0R5bmFtb0RCKGl0ZW0uZW1wbG95ZWVJZCksXG4gICAgICBzazogXCJJVEVNI1wiICsgaWQsXG4gICAgfSxcbiAgICBhdHRyaWJ1dGVWYWx1ZXM6IHV0aWwuZHluYW1vZGIudG9NYXBWYWx1ZXMoe1xuICAgICAgcHVibGlzaERhdGU6IHV0aWwudGltZS5ub3dJU084NjAxKCksXG4gICAgICAuLi5pdGVtLFxuICAgICAgR1NJMVBLOiBcIklOVkVOVE9SWSNcIiArIGl0ZW0uaW52ZW50b3J5SWQsXG4gICAgICBHU0kxU0s6IFwiSVRFTSNcIiArIGlkLFxuICAgICAgR1NJMlBLOiBcIklURU1cIixcbiAgICB9KSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc3BvbnNlKGN0eDogQ29udGV4dDxJdGVtPikge1xuICByZXR1cm4gY3R4LnJlc3VsdDtcbn1cbiJdfQ==